<%= render 'admin/shared/header'%>

<div class="container">
  <div class="content">
    <h1 class="has-text-grey">Serviços</h1>
    <%= form_tag(admin_services_path, method: :get, id: 'form_search', class:'custom') do %>
      <div class="field is-grouped">
        <p class="control is-expanded">
          <%= text_field_tag :query, params[:query], class:'input', placeholder:'Pesquise algum serviço...' %>
        </p>

        <p class="control is-expanded">
          <%= select_tag :status, options_for_select([['Aprovado','approved'],["Arquivado",'archived'],[
          'Recusado', 'recused'],['Aguardando aprovação', 'awaiting_avaliation']]), class:'input', include_blank:'Pesquise algum usuário...' %>
        </p>

        <p class="control">
          <%= submit_tag 'Buscar',  class: 'button is-info' %>
        </p>
      </div>
    <% end %>

    <table class="table">
      <thead>
        <tr>
          <th>Título</th>
          <th>Categoria</th>
          <th>Duração</th>
          <th>Valor</th>
          <th colspan="3"></th>
        </tr>
      </thead>

      <tbody>
        <% @services.each do |service| %>
          <tr>
            <td><%= service.title %></td>
            <td><%= service.category.name %></td>
            <td><%= service.duration %></td>
            <td>R$ <%= service.amount %></td>
            <td><a href="#">detalhes</a></td>
          </tr>
        <% end %>
      </tbody>
    </table>
  </div>
  <% if @services.present? %>
    <%= pagy_bulma_nav(@pagy).html_safe %>
  <% end %>
</div>