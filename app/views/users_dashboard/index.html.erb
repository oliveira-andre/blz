<%= render 'pages/shared/header' %>
<div class="users_dashboard">
  <div class="container">
    <div class="columns is-multiline">
      <div class="column is-12">
        <%= render 'form', resource: current_user, resource_name: 'user' %>
      </div>
      <div class="column is-12">
        <div class="tabs is-toggle is-toggle-rounded">
          <ul>
            <li class="tab is-active"  data-target='scheduling'>
              <a>
                <span class="icon is-small">
                  <i class="fas fa-calendar-alt"></i>
                </span>
                <span>Minha Agenda</span>
              </a>
            </li>
            <li class="tab" data-target='history'>
              <a>
                <span class="icon is-small">
                  <i class="fas fa-history"></i>
                </span>
                <span>Histórico</span>
              </a>
            </li>
          </ul>
        </div>
      </div>
      <div id="scheduling" class="column is-12 content-tab">
        <% if @scheduling.any? %>
          <% @scheduling.each do |schedule| %>
            <div class="column is-12">
              <div class="box">
                <article class="media">
                  <div class="media-left">
                    <figure class="image is-64x64">
                      <% if schedule.professional_service.service.establishment.photo.attached? %>
                        <%= image_tag schedule.professional_service.service.establishment.photo %>
                      <% else %>
                        <img src="https://bulma.io/images/placeholders/128x128.png" alt="Image">
                      <% end %>
                    </figure>
                  </div>
                  <div class="media-content">
                    <div class="columns is-multiline">
                      <div class="column is-12">
                        <div class="content">
                          <p class="has-text-weight-semibold">
                            <%= schedule.professional_service.service.establishment.name %>
                          </p>
                          <p>
                            <i class="fas fa-star is-size-5"></i>
                            <i class="fas fa-star is-size-5"></i>
                            <i class="fas fa-star is-size-5"></i>
                            <i class="far fa-star is-size-5"></i>
                            <i class="far fa-star is-size-5"></i>
                          </p>
                          <p  class="has-text-weight-semibold"><%= schedule.professional_service.service.title %></p>
                        </div>
                      </div>
                      <div class="column is-4">
                        <i class="fas fa-money-bill-wave is-size-4"></i>
                        R$ <%= schedule.professional_service.service.amount %>
                      </div>
                      <div class="column is-4">
                        <i class="fas fa-hourglass-half is-size-4"></i>
                        <%= schedule.professional_service.service.duration %> minutos
                      </div>
                      <div class="column is-4">
                        <i class="fas fa-clock is-size-4"></i>
                        <%= "#{day_month(schedule.date)} - #{time(schedule.date)}" %>
                      </div>
                      <% unless schedule.professional_service.service.establishment.address.nil? %>
                        <div class="column is-12">
                          <span>
                            <i class="fas fa-map-marker-alt is-size-4"></i>
                            <%= schedule.professional_service.service.establishment.address.full %>
                          </span>
                        </div>
                      <% end %>
                    </div>
                  </div>
                </article>
              </div>
            </div>
          <% end %>
        <% else %>
          <div class="columns is-multiline is-centered is-vcentered no-scheduling">
            <div class="column is-12 has-text-centered">
              <p class="has-text-grey-light has-text-weight-semibold is-size-3 ">
                Você ainda não possui agendamentos :(
              </p>
            </div>
            <div class="column is-12 has-text-centered">
              <p class="has-text-grey-light is-size-1">
                <i class="fas fa-business-time"></i>
              </p>
            </div>
            <div class="column is-12 has-text-centered">
              <%= link_to root_path do %>
                <span class="button is-info is-size-5">
                  Encontre um serviço aqui
                </span>
              <% end %>
            </div>
          </div>
        <% end %>
      </div>
      <div id="history" class="column is-12 content-tab"  style="display:none">
        <div class="columns is-multiline is-centered is-vcentered no-scheduling">
          <div class="column is-12 has-text-centered">
            <p class="has-text-grey-light has-text-weight-semibold is-size-3 ">
              Você ainda não possui histórico de agendamentos :(
            </p>
          </div>
          <div class="column is-12 has-text-centered">
            <p class="has-text-grey-light is-size-1">
              <i class="fas fa-business-time"></i>
            </p>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>